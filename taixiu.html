<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tool Soi Cáº§u TÃ i Xá»‰u</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;background:#0f172a;color:white;font-family:sans-serif}
.box{padding:15px}
input,button{width:100%;padding:12px;margin:6px 0;border-radius:10px;border:none}
button{background:#22c55e;font-weight:bold}
.card{background:#020617;padding:12px;border-radius:12px;margin-top:10px}
.streak{font-size:36px;font-weight:900;text-align:center;margin:10px 0}
.T{color:#22c55e}
.X{color:#ef4444}
</style>
</head>

<body>
<div class="box">

<h2>ğŸ² Tool Soi Cáº§u TÃ i Xá»‰u</h2>

<input id="cau" placeholder="Nháº­p: TTXTXTTXX">
<button onclick="soi()">SOI Cáº¦U</button>

<div id="streak" class="streak">ğŸ”¥ --</div>

<div class="card" id="result"></div>
<div class="card" id="goiy"></div>

<hr>

<h3>ğŸ’° Quáº£n LÃ½ Vá»‘n</h3>
<input id="bankInput" type="number" placeholder="Vá»‘n ban Ä‘áº§u (vd: 10000000)">
<input id="betInput" type="number" placeholder="% cÆ°á»£c má»—i tay (vd: 2)">
<button onclick="initBank()">Khá»Ÿi táº¡o</button>

<div class="card" id="bankBox">Vá»‘n: --</div>
<button onclick="win()">âœ… Tháº¯ng</button>
<button onclick="lose()">âŒ Thua</button>

<canvas id="chart"></canvas>

</div>

<script>
let chart;
let startBank=0;
let bank=0;
let betPercent=2;

function soi(){
 let d=cau.value.toUpperCase().replace(/\s/g,'');
 if(!d) return alert("Nháº­p T hoáº·c X");

 for(let c of d){
  if(c!="T"&&c!="X") return alert("Chá»‰ nháº­p T hoáº·c X");
 }

 let t=(d.match(/T/g)||[]).length;
 let x=(d.match(/X/g)||[]).length;

 let tRate=(t/d.length*100).toFixed(1);
 let xRate=(x/d.length*100).toFixed(1);

 result.innerText=`TÃ€I: ${tRate}% | Xá»ˆU: ${xRate}%`;
 goiy.innerText=t>x?"ğŸ‘‰ NghiÃªng TÃ€I":x>t?"ğŸ‘‰ NghiÃªng Xá»ˆU":"ğŸ‘‰ CÃ¢n báº±ng";

 let s=1;
 for(let i=d.length-1;i>0;i--){
  if(d[i]==d[i-1]) s++;
  else break;
 }

 let last=d[d.length-1];
 streak.className="streak "+last;
 streak.innerText=`ğŸ”¥ ${last} x ${s}`;

 drawChart(d);
}

function drawChart(d){
 let y=[],labels=[],colors=[];
 for(let i=0;i<d.length;i++){
  labels.push(i+1);
  if(d[i]=="T"){y.push(1);colors.push("#22c55e")}
  else{y.push(0);colors.push("#ef4444")}
 }

 if(chart) chart.destroy();
 chart=new Chart(document.getElementById("chart"),{
  type:"line",
  data:{labels,datasets:[{data:y,pointBackgroundColor:colors,pointRadius:5,borderColor:"#94a3b8"}]},
  options:{
   plugins:{legend:{display:false}},
   scales:{y:{min:-.2,max:1.2,ticks:{callback:v=>v==1?"T":"X"}}}
  }
 });
}

function initBank(){
 startBank=Number(bankInput.value);
 betPercent=Number(betInput.value);
 if(!startBank||!betPercent) return alert("Nháº­p Ä‘á»§ vá»‘n vÃ  %");
 bank=startBank;
 updateBank();
}

function bet(){
 return Math.floor(bank*betPercent/100);
}

function win(){
 let b=bet();
 bank+=b;
 updateBank();
}

function lose(){
 let b=bet();
 bank-=b;
 updateBank();
}

function updateBank(){
 bankBox.innerText="Vá»‘n: "+bank.toLocaleString()+" | CÆ°á»£c: "+bet().toLocaleString();
}
</script>

</body>
</html>
